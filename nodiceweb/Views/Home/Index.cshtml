@model IEnumerable<nodiceweb.Models.Team>


@{
    ViewBag.Title = "Home Page";
}


<div class="jumbotron">
    <h1>No Dice Web sites</h1>
    <p class="lead">Strat-O-Matic Draft League, est: 1991?</p>
<!--    <p><a href="http://asp.net" class="btn btn-primary btn-lg">Learn more &raquo;</a></p>-->
</div>

<div class="row">
    <div class="col-md-8">
        <h2>Current Standings</h2>
        <p>
@foreach (var group in Model.GroupBy(model =>
                                new
                                {
                                    League = model.League,
                                    Division = model.Division
                                }))
{

    <table class="table">
        <tr>
            @Html.DisplayNameFor(model => model.Name)
            @Html.DisplayNameFor(model => model.Division)
        </tr>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.Name)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Manager)
            </th>
            <th>
               @Html.DisplayNameFor(model => model.Seasons.First().Win)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Seasons.First().Lost)
            </th>
            <th>
                Percentage
            </th>
            <th>
                GB
            </th>
            <th>
                LW
            </th>
            <th></th>
        </tr>

        @nodiceweb.NoDiceUtils.ResetLeaderInformation();

        @foreach (var item in group)
        {


            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.Name)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Manager)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Seasons.FirstOrDefault().Win)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Seasons.FirstOrDefault().Lost)
                </td>
                <td>
                    @if (@item.Seasons.Count > 0)
                    {
                        @nodiceweb.NoDiceUtils.GetWinningPercentage(@item.Seasons.FirstOrDefault().Win,
                                                                        @item.Seasons.FirstOrDefault().Lost);
                    }
                </td>
                <td>
                    @if (@item.Seasons.Count > 0)
                    {
                        @nodiceweb.NoDiceUtils.CheckHeaderInformation(@item.Seasons.FirstOrDefault().Win,
                                                                    @item.Seasons.FirstOrDefault().Lost);

                        @nodiceweb.NoDiceUtils.CalculateGamesBehind(@item.Seasons.FirstOrDefault().Win,
                                                                        @item.Seasons.FirstOrDefault().Lost);
                    }
                </td>
                <td>
                    -
                </td>
                <td>
                     @Html.ActionLink("Details", "Details", new { id = item.Id }) |
                </td>
            </tr>
    
        }

    </table>
}
          </p>
     </div>
    <div class="col-md-3">
        <h2>News</h2>
        <p>This is where league news and information is available</p>
    </div>
</div>


